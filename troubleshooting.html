<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-troubleshooting">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Troubleshooting | Fleet</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://fleet.rancher.io//troubleshooting"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Troubleshooting | Fleet"><meta data-rh="true" name="description" content="This section contains commands and tips to troubleshoot Fleet."><meta data-rh="true" property="og:description" content="This section contains commands and tips to troubleshoot Fleet."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://fleet.rancher.io//troubleshooting"><link data-rh="true" rel="alternate" href="https://fleet.rancher.io//troubleshooting" hreflang="en"><link data-rh="true" rel="alternate" href="https://fleet.rancher.io//troubleshooting" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.92efe5b6.css">
<link rel="preload" href="/assets/js/runtime~main.a1c8cf13.js" as="script">
<link rel="preload" href="/assets/js/main.d47e347e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__docs navbar__link--active" href="/">Docs</a><a href="https://github.com/rancher/rke2" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__github btn btn-secondary icon-github">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quickstart">Quick Start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/concepts">Core Concepts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/examples">Examples</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cluster-overview">Operator Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/gitrepo-add">User Guide</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/troubleshooting">Troubleshooting</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/advanced-users">Advanced Users</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Troubleshooting</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Troubleshooting</h1><p>This section contains commands and tips to troubleshoot Fleet.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-do-i"><strong>How Do I...</strong><a class="hash-link" href="#how-do-i" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fetch-the-log-from-fleet-controller">Fetch the log from <code>fleet-controller</code>?<a class="hash-link" href="#fetch-the-log-from-fleet-controller" title="Direct link to heading">​</a></h3><p>In the local management cluster where the <code>fleet-controller</code> is deployed, run the following command with your specific <code>fleet-controller</code> pod name filled in:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ kubectl logs -l app=fleet-controller -n cattle-fleet-system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fetch-the-log-from-the-fleet-agent">Fetch the log from the <code>fleet-agent</code>?<a class="hash-link" href="#fetch-the-log-from-the-fleet-agent" title="Direct link to heading">​</a></h3><p>Go to each downstream cluster and run the following command for the local cluster with your specific <code>fleet-agent</code> pod name filled in:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Downstream cluster</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ kubectl logs -l app=fleet-agent -n cattle-fleet-system</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Local cluster</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ kubectl logs -l app=fleet-agent -n cattle-local-fleet-system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fetch-detailed-error-logs-from-gitrepos-and-bundles">Fetch detailed error logs from <code>GitRepos</code> and <code>Bundles</code>?<a class="hash-link" href="#fetch-detailed-error-logs-from-gitrepos-and-bundles" title="Direct link to heading">​</a></h3><p>Normally, errors should appear in the Rancher UI. However, if there is not enough information displayed about the error there, you can research further by trying one or more of the following as needed:</p><ul><li>For more information about the bundle, click on <code>bundle</code>, and the YAML mode will be enabled. </li><li>For more information about the GitRepo, click on <code>GitRepo</code>, then click on <code>View Yaml</code> in the upper right of the screen. After viewing the YAML, check <code>status.conditions</code>; a detailed error message should be displayed here.</li><li>Check the <code>fleet-controller</code> for synching errors.</li><li>Check the <code>fleet-agent</code> log in the downstream cluster if you encounter issues when deploying the bundle.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="check-a-chart-rendering-error-in-kustomize">Check a chart rendering error in <code>Kustomize</code>?<a class="hash-link" href="#check-a-chart-rendering-error-in-kustomize" title="Direct link to heading">​</a></h3><p>Check the <a href="/troubleshooting#fetch-the-log-from-fleet-controller"><code>fleet-controller</code> logs</a> and the <a href="/troubleshooting#fetch-the-log-from-the-fleet-agent"><code>fleet-agent</code> logs</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="check-errors-about-watching-or-checking-out-the-gitrepo-or-about-the-downloaded-helm-repo-in-fleetyaml">Check errors about watching or checking out the <code>GitRepo</code>, or about the downloaded Helm repo in <code>fleet.yaml</code>?<a class="hash-link" href="#check-errors-about-watching-or-checking-out-the-gitrepo-or-about-the-downloaded-helm-repo-in-fleetyaml" title="Direct link to heading">​</a></h3><p>Check the <code>gitjob-controller</code> logs using the following command with your specific <code>gitjob</code> pod name filled in:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ kubectl logs -f $gitjob-pod-name -n cattle-fleet-system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that there are two containers inside the pod: the <code>step-git-source</code> container that clones the git repo, and the <code>fleet</code> container that applies bundles based on the git repo. </p><p>The pods will usually have images named <code>rancher/tekton-utils</code> with the <code>gitRepo</code> name as a prefix. Check the logs for these Kubernetes job pods in the local management cluster as follows, filling in your specific <code>gitRepoName</code> pod name and namespace:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ kubectl logs -f $gitRepoName-pod-name -n namespace</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="check-the-status-of-the-fleet-controller">Check the status of the <code>fleet-controller</code>?<a class="hash-link" href="#check-the-status-of-the-fleet-controller" title="Direct link to heading">​</a></h3><p>You can check the status of the <code>fleet-controller</code> pods by running the commands below:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl -n cattle-fleet-system logs -l </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">app</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">fleet-controller</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl -n cattle-fleet-system get pods -l </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">app</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">fleet-controller</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                                READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fleet-controller-64f49d756b-n57wq   </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">          3m21s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="migrate-the-local-cluster-to-the-fleet-default-cluster">Migrate the local cluster to the Fleet default cluster?<a class="hash-link" href="#migrate-the-local-cluster-to-the-fleet-default-cluster" title="Direct link to heading">​</a></h3><p>For users who want to deploy to the local cluster as well, they may move the cluster from <code>fleet-local</code> to <code>fleet-default</code> in the Rancher UI as follows:</p><ul><li>To get to Fleet in Rancher, click ☰ &gt; Continuous Delivery.</li><li>Under the <strong>Clusters</strong> menu, select the <strong>local</strong> cluster by checking the box to the left.</li><li>Select <strong>Assign to</strong> from the tabs above the cluster.</li><li>Select <strong><code>fleet-default</code></strong> from the <strong>Assign Cluster To</strong> dropdown.</li></ul><p><strong>Result</strong>: The cluster will be migrated to <code>fleet-default</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="enable-debug-logging-for-fleet-controller-and-fleet-agent">Enable debug logging for <code>fleet-controller</code> and <code>fleet-agent</code>?<a class="hash-link" href="#enable-debug-logging-for-fleet-controller-and-fleet-agent" title="Direct link to heading">​</a></h3><p>Available in Rancher v2.6.3 (Fleet v0.3.8), the ability to enable debug logging has been added.</p><ul><li>Go to the <strong>Dashboard</strong>, then click on the <strong>local cluster</strong> in the left navigation menu </li><li>Select <strong>Apps &amp; Marketplace</strong>, then <strong>Installed Apps</strong> from the dropdown </li><li>From there, you will upgrade the Fleet chart with the value <code>debug=true</code>. You can also set <code>debugLevel=5</code> if desired.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="additional-solutions-for-other-fleet-issues"><strong>Additional Solutions for Other Fleet Issues</strong><a class="hash-link" href="#additional-solutions-for-other-fleet-issues" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="naming-conventions-for-crds">Naming conventions for CRDs<a class="hash-link" href="#naming-conventions-for-crds" title="Direct link to heading">​</a></h3><ol><li><p>For CRD terms like <code>clusters</code> and <code>gitrepos</code>, you must reference the full CRD name. For example, the cluster CRD&#x27;s complete name is <code>cluster.fleet.cattle.io</code>, and the gitrepo CRD&#x27;s complete name is <code>gitrepo.fleet.cattle.io</code>.</p></li><li><p><code>Bundles</code>, which are created from the <code>GitRepo</code>, follow the pattern <code>$gitrepoName-$path</code> in the same workspace/namespace where the <code>GitRepo</code> was created. Note that <code>$path</code> is the path directory in the git repository that contains the <code>bundle</code> (<code>fleet.yaml</code>).</p></li><li><p><code>BundleDeployments</code>, which are created from the <code>bundle</code>, follow the pattern <code>$bundleName-$clusterName</code> in the namespace <code>clusters-$workspace-$cluster-$generateHash</code>. Note that <code>$clusterName</code> is the cluster to which the bundle will be deployed.</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="http-secrets-in-github">HTTP secrets in Github<a class="hash-link" href="#http-secrets-in-github" title="Direct link to heading">​</a></h3><p>When testing Fleet with private git repositories, you will notice that HTTP secrets are no longer supported in Github. To work around this issue, follow these steps:</p><ol><li>Create a <a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token" target="_blank" rel="noopener noreferrer">personal access token</a> in Github.</li><li>In Rancher, create an HTTP <a href="https://rancher.com/docs/rancher/v2.6/en/k8s-in-rancher/secrets/" target="_blank" rel="noopener noreferrer">secret</a> with your Github username.</li><li>Use your token as the secret.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fleet-fails-with-bad-response-code-403">Fleet fails with bad response code: 403<a class="hash-link" href="#fleet-fails-with-bad-response-code-403" title="Direct link to heading">​</a></h3><p>If your GitJob returns the error below, the problem may be that Fleet cannot access the Helm repo you specified in your <a href="/gitrepo-structure"><code>fleet.yaml</code></a>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">time=&quot;2021-11-04T09:21:24Z&quot; level=fatal msg=&quot;bad response code: 403&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Perform the following steps to assess:</p><ul><li>Check that your repo is accessible from your dev machine, and that you can download the Helm chart successfully</li><li>Check that your credentials for the git repo are valid</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="helm-chart-repo-certificate-signed-by-unknown-authority">Helm chart repo: certificate signed by unknown authority<a class="hash-link" href="#helm-chart-repo-certificate-signed-by-unknown-authority" title="Direct link to heading">​</a></h3><p>If your GitJob returns the error below, you may have added the wrong certificate chain:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">time=&quot;2021-11-11T05:55:08Z&quot; level=fatal msg=&quot;Get \&quot;https://helm.intra/virtual-helm/index.yaml\&quot;: x509: certificate signed by unknown authority&quot; </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Please verify your certificate with the following command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">context</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">playground-local</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get secret -n fleet-default helm-repo -o </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">jsonpath</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{[&#x27;data&#x27;][&#x27;cacerts&#x27;]}&quot;</span><span class="token plain"> --context </span><span class="token variable" style="color:rgb(191, 199, 213)">$context</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> base64 -d </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> openssl x509 -text -noout</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Certificate:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Data:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        Version: </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">0x2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        Serial Number:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            7a:1e:df:79:5f:b0:e0:be:49:de:11:5e:d9:9c:a9:71</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        Signature Algorithm: sha512WithRSAEncryption</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        Issuer: C </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> CH, O </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> MY COMPANY, CN </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> NOP Root CA G3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fleet-deployment-stuck-in-modified-state">Fleet deployment stuck in modified state<a class="hash-link" href="#fleet-deployment-stuck-in-modified-state" title="Direct link to heading">​</a></h3><p>When you deploy bundles to Fleet, some of the components are modified, and this causes the &quot;modified&quot; flag in the Fleet environment.</p><p>To ignore the modified flag for the differences between the Helm install generated by <code>fleet.yaml</code> and the resource in your cluster, add a <code>diff.comparePatches</code> to the <code>fleet.yaml</code> for your Deployment, as shown in this example:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">defaultNamespace</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> &lt;namespace name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">helm</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">releaseName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> &lt;release name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">repo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> &lt;repo name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">chart</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> &lt;chart name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">diff</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">comparePatches</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">operations</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">&quot;op&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;remove&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> &quot;path&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/spec/template/spec/hostNetwork&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">&quot;op&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;remove&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> &quot;path&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/spec/template/spec/nodeSelector&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">jsonPointers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># jsonPointers allows to ignore diffs at certain json path</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/spec/template/spec/priorityClassName&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/spec/template/spec/tolerations&quot;</span><span class="token plain"> </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To determine which operations should be removed, observe the logs from <code>fleet-agent</code> on the target cluster. You should see entries similar to the following:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">level=error msg=&quot;bundle monitoring-monitoring: deployment.apps monitoring/monitoring-monitoring-kube-state-metrics modified {\&quot;spec\&quot;:{\&quot;template\&quot;:{\&quot;spec\&quot;:{\&quot;hostNetwork\&quot;:false}}}}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Based on the above log, you can add the following entry to remove the operation:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token property">&quot;op&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;remove&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token property">&quot;path&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/spec/template/spec/hostNetwork&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="gitrepo-or-bundle-stuck-in-modified-state"><code>GitRepo</code> or <code>Bundle</code> stuck in modified state<a class="hash-link" href="#gitrepo-or-bundle-stuck-in-modified-state" title="Direct link to heading">​</a></h3><p><strong>Modified</strong> means that there is a mismatch between the actual state and the desired state, the source of truth, which lives in the git repository.</p><ol><li><p>Check the <a href="/bundle-diffs">bundle diffs documentation</a> for more information. </p></li><li><p>You can also force update the <code>gitrepo</code> to perform a manual resync. Select <strong>GitRepo</strong> on the left navigation bar, then select <strong>Force Update</strong>.</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bundle-has-a-horizontal-pod-autoscaler-hpa-in-modified-state">Bundle has a Horizontal Pod Autoscaler (HPA) in modified state<a class="hash-link" href="#bundle-has-a-horizontal-pod-autoscaler-hpa-in-modified-state" title="Direct link to heading">​</a></h3><p>For bundles with an HPA, the expected state is <code>Modified</code>, as the bundle contains fields that differ from the state of the Bundle at deployment - usually <code>ReplicaSet</code>.</p><p>You must define a patch in the <code>fleet.yaml</code> to ignore this field according to <a href="#gitrepo-or-bundle-stuck-in-modified-state"><code>GitRepo</code> or <code>Bundle</code> stuck in modified state</a>.</p><p>Here is an example of such a patch for the deployment <code>nginx</code> in namespace <code>default</code>:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">diff</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">comparePatches</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">operations</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token key atrule">&quot;op&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;remove&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token key atrule">&quot;path&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/spec/replicas&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-if-the-cluster-is-unavailable-or-is-in-a-waitcheckin-state">What if the cluster is unavailable, or is in a <code>WaitCheckIn</code> state?<a class="hash-link" href="#what-if-the-cluster-is-unavailable-or-is-in-a-waitcheckin-state" title="Direct link to heading">​</a></h3><p>You will need to re-import and restart the registration process: Select <strong>Cluster</strong> on the left navigation bar, then select <strong>Force Update</strong></p><p>!!! note &quot;WaitCheckIn status for Rancher v2.5&quot;
The cluster will show in <code>WaitCheckIn</code> status because the <code>fleet-controller</code> is attempting to communicate with Fleet using the Rancher service IP. However, Fleet must communicate directly with Rancher via the Kubernetes service DNS using service discovery, not through the proxy. For more, see the <a href="https://rancher.com/docs/rancher/v2.5/en/installation/other-installation-methods/behind-proxy/install-rancher/#install-rancher" target="_blank" rel="noopener noreferrer">Rancher docs</a>. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="gitrepo-complains-with-gzip-invalid-header">GitRepo complains with <code>gzip: invalid header</code><a class="hash-link" href="#gitrepo-complains-with-gzip-invalid-header" title="Direct link to heading">​</a></h3><p>When you see an error like the one below ...</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Error opening a gzip reader for /tmp/getter154967024/archive: gzip: invalid header</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>... the content of the helm chart is incorrect. Manually download the chart to your local machine and check the content.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/fleet-docs/docs/edit/main/docs/troubleshooting.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-10-03T14:20:05.000Z">Oct 3, 2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/cluster-bundles-state"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Cluster and Bundle state</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/advanced-users"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Advanced Users</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-do-i" class="table-of-contents__link toc-highlight"><strong>How Do I...</strong></a><ul><li><a href="#fetch-the-log-from-fleet-controller" class="table-of-contents__link toc-highlight">Fetch the log from <code>fleet-controller</code>?</a></li><li><a href="#fetch-the-log-from-the-fleet-agent" class="table-of-contents__link toc-highlight">Fetch the log from the <code>fleet-agent</code>?</a></li><li><a href="#fetch-detailed-error-logs-from-gitrepos-and-bundles" class="table-of-contents__link toc-highlight">Fetch detailed error logs from <code>GitRepos</code> and <code>Bundles</code>?</a></li><li><a href="#check-a-chart-rendering-error-in-kustomize" class="table-of-contents__link toc-highlight">Check a chart rendering error in <code>Kustomize</code>?</a></li><li><a href="#check-errors-about-watching-or-checking-out-the-gitrepo-or-about-the-downloaded-helm-repo-in-fleetyaml" class="table-of-contents__link toc-highlight">Check errors about watching or checking out the <code>GitRepo</code>, or about the downloaded Helm repo in <code>fleet.yaml</code>?</a></li><li><a href="#check-the-status-of-the-fleet-controller" class="table-of-contents__link toc-highlight">Check the status of the <code>fleet-controller</code>?</a></li><li><a href="#migrate-the-local-cluster-to-the-fleet-default-cluster" class="table-of-contents__link toc-highlight">Migrate the local cluster to the Fleet default cluster?</a></li><li><a href="#enable-debug-logging-for-fleet-controller-and-fleet-agent" class="table-of-contents__link toc-highlight">Enable debug logging for <code>fleet-controller</code> and <code>fleet-agent</code>?</a></li></ul></li><li><a href="#additional-solutions-for-other-fleet-issues" class="table-of-contents__link toc-highlight"><strong>Additional Solutions for Other Fleet Issues</strong></a><ul><li><a href="#naming-conventions-for-crds" class="table-of-contents__link toc-highlight">Naming conventions for CRDs</a></li><li><a href="#http-secrets-in-github" class="table-of-contents__link toc-highlight">HTTP secrets in Github</a></li><li><a href="#fleet-fails-with-bad-response-code-403" class="table-of-contents__link toc-highlight">Fleet fails with bad response code: 403</a></li><li><a href="#helm-chart-repo-certificate-signed-by-unknown-authority" class="table-of-contents__link toc-highlight">Helm chart repo: certificate signed by unknown authority</a></li><li><a href="#fleet-deployment-stuck-in-modified-state" class="table-of-contents__link toc-highlight">Fleet deployment stuck in modified state</a></li><li><a href="#gitrepo-or-bundle-stuck-in-modified-state" class="table-of-contents__link toc-highlight"><code>GitRepo</code> or <code>Bundle</code> stuck in modified state</a></li><li><a href="#bundle-has-a-horizontal-pod-autoscaler-hpa-in-modified-state" class="table-of-contents__link toc-highlight">Bundle has a Horizontal Pod Autoscaler (HPA) in modified state</a></li><li><a href="#what-if-the-cluster-is-unavailable-or-is-in-a-waitcheckin-state" class="table-of-contents__link toc-highlight">What if the cluster is unavailable, or is in a <code>WaitCheckIn</code> state?</a></li><li><a href="#gitrepo-complains-with-gzip-invalid-header" class="table-of-contents__link toc-highlight">GitRepo complains with <code>gzip: invalid header</code></a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 SUSE Rancher. All Rights Reserved.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.a1c8cf13.js"></script>
<script src="/assets/js/main.d47e347e.js"></script>
</body>
</html>